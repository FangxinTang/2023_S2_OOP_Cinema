{% extends "base.html" %}
{% block title %}Customer Dashboard{% endblock %}
{% block main %}
<hr>

<div class="container">
    <div class="sub-title">
        <div class="row">
            <h3>Customer Dashboard</h3>
        </div>
    </div>

    <div class="row">
        <div class="func">
            <a href="/my-bookings">My bookings</a>
        </div>
    </div>


    <div class="row">
        <div class="col-8">
            <div class="search-form">
                <form action="/search-movie" method="post">

                    <label for="title">Title:</label>
                    <input type="text" name="title">
                    <br>
                    <label for="language">Language:</label>
                    <select name="language">
                        <option value="none" selected disabled>Select a language</option>
                        {%for language in language_list%}
                        <option value="{{language}}">{{language}}</option>
                        {%endfor%}
                    </select>
                    <br>
                    <label for="genre">Genre:</label>
                    <select name="genre">
                        <option value="none" selected disabled>Select a genre</option>
                        {%for genre in genre_list%}
                        <option value="{{genre}}">{{genre}}</option>
                        {%endfor%}
                    </select>
                    <br>
                    <label for="release_date">Release Date:</label>
                    <select name="release_date">
                        <option value="none" selected disabled>Select a date</option>
                        {% for date in date_list %}
                        <option value="{{ date }}">{{ date }}</option>
                        {% endfor %}
                    </select>
                    <br>
                    <button type="submit">Search</button>

                </form>
            </div>
        </div>

        <div class="col-4">
            <div class="log-out">
                <a href="{{ url_for('logout') }}">
                    <button class="btn btn-primary">Logout</button>
                </a>
            </div>
        </div>


        <div class="movie-list-table">
            <table>
                <thead>
                    <tr>
                        <th>Movie</th>
                        <th style="width: 250px;">Description</th>
                        <th>Language</th>
                        <th>Genre</th>
                        <th>Release Date</th>
                        <th>Country</th>
                        <th>Duration</th>
                        <th>Screenings</th>
                    </tr>
                </thead>
                <tbody>
                    {% for movie in movie_list%}
                    <tr>
                        <td style="justify-content: center;">
                            <img src="../static/images/{{movie.title}}.jpg" alt="{{movie.title}} img"
                                style="max-width: 100px;">
                        </td>
                        <td style="text-align: left;">
                            <strong>{{movie.title}}</strong>
                            <br>
                            {{movie.description}}
                        </td>
                        <td>{{movie.language}}</td>
                        <td>{{movie.genre}}</td>
                        <td>{{movie.release_date}}</td>
                        <td>{{movie.country}}</td>
                        <td>{{movie.duration_mins}} Mins</td>
                        <td>
                            {%for screening in movie.screenings %}
                            <div class="row">
                                <p style="font-size:medium;">
                                    Hall {{screening.hall_id}} -
                                    {{screening.screening_date}} -
                                    {{screening.start_time}} - {{screening.end_time}}
                                    <a href="/booking/{{screening.screening_id}}"> Book Now</a>
                                </p>
                            </div>
                            {%endfor%}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

        </div>
    </div>




    <hr>

    {% endblock %}